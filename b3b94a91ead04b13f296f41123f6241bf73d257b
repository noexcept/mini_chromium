{
  "comments": [
    {
      "key": {
        "uuid": "16771e32_d1705734",
        "filename": "build/BUILDCONFIG.gn",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1174099
      },
      "writtenOn": "2017-11-27T20:50:18Z",
      "side": 1,
      "message": "But aren’t there other target types that we’d also want -Wexit-time-destructors for?",
      "revId": "b3b94a91ead04b13f296f41123f6241bf73d257b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94aa7838_2ffb57c5",
        "filename": "build/BUILDCONFIG.gn",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1144260
      },
      "writtenOn": "2017-11-27T23:19:24Z",
      "side": 1,
      "message": "BUILDCONFIG.gn is the setup for the project, as if mini_chromium were to be built by itself. But there\u0027s currently only build files and a static library in mini_chromium so there are no other targets to set defaults for, as there\u0027s no test binaries, examples, etc. in mini_chromium.\n\nIn the Crashpad tree, there\u0027s also a BUILDCONFIG.gn (which mostly uses the configuration details from mini_chromium\u0027s build/BUILD.gn as this BUILDCONFIG.gn does). In Crashpad\u0027s we do indeed need to add //build:Wexit_time_destructors to all target types.\n\nWe might want to consider just removing this BUILDCONFIG.gn since it\u0027s probably mostly just serving to be confusing as there\u0027s not much utility to building libbase.a standalone in the mini_chromium tree.\n\nThat would still leave build/BUILD.gn containing compiler flags, etc. to be used here and shared with Crashpad, and base/BUILD.gn which has the list of files that are necessary to build base as a static library.",
      "parentUuid": "16771e32_d1705734",
      "revId": "b3b94a91ead04b13f296f41123f6241bf73d257b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9fbb9f3d_e2c8df2f",
        "filename": "build/BUILDCONFIG.gn",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1144624
      },
      "writtenOn": "2017-11-28T15:43:38Z",
      "side": 1,
      "message": "I don\u0027t know if we can get away with fully removing mini_chromium\u0027s BUILDCONFIG.gn because we\u0027ll need the is_OS variables. But I support the idea of it being as minimal as possible since mini_chromium is a library for projects to build on top of.",
      "parentUuid": "94aa7838_2ffb57c5",
      "revId": "b3b94a91ead04b13f296f41123f6241bf73d257b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b2c9562_726d86e3",
        "filename": "build/BUILDCONFIG.gn",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1144260
      },
      "writtenOn": "2017-11-29T00:48:17Z",
      "side": 1,
      "message": "I\u0027m not sure if I\u0027m getting confused or we all just have different visions of how this might work. :)\n\nHere\u0027s where I\u0027m at at the moment:\n- mini_chromium build/BUILDCONFIG.gn configures mini_chromium\u0027s build referring to its build/BUILD.gn.\n- Crashpad build/BUILDCONFIG.gn configures Crashpad\u0027s build, *also* referring to mini_chromium\u0027s build/BUILD.gn.\n- In a Crashpad build, mini_chromium/build/BUILDCONFIG.gn isn\u0027t referenced at all. So the only thing that mini_chromium\u0027s build/BUILDCONFIG.gn is useful for is doing a standalone build of mini_chromium\u0027s libbase.a, or as an example for a new project to copy and start from.\n\nSo I think it could be deleted without any effect other than breaking the standalone mini_chromium build which I don\u0027t think we care about. If I did that, then I\u0027d also delete mini_chromium\u0027s root .gn file.\n\nIn any case, I can take or leave the change to or removal of this file, but the gmock-in-Crashpad build needs to move the -W flag out into a separate config in build/BUILD.gn.",
      "parentUuid": "9fbb9f3d_e2c8df2f",
      "revId": "b3b94a91ead04b13f296f41123f6241bf73d257b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f8b258ed_a774f942",
        "filename": "build/BUILDCONFIG.gn",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1144624
      },
      "writtenOn": "2017-11-29T15:53:05Z",
      "side": 1,
      "message": "I think we\u0027re just talking past each other because I agree with what you wrote. I\u0027m in favor of not having a standalone mini_chromium build.",
      "parentUuid": "7b2c9562_726d86e3",
      "revId": "b3b94a91ead04b13f296f41123f6241bf73d257b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "030c4ea5_e47a3d57",
        "filename": "build/BUILDCONFIG.gn",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1174099
      },
      "writtenOn": "2017-11-29T16:15:41Z",
      "side": 1,
      "message": "\u003e I think we\u0027re just talking past each other because I agree with what you wrote. I\u0027m in favor of not having a standalone mini_chromium build.\n\nIn principle, I’d like to have a standalone mini_chromium build. But the reality is that it’s not going to be tested, so it’ll wind up not working, and at that point, it’s not really worth having at all. If we wind up with an important consumer that wants it, we can deal with it at that point.",
      "parentUuid": "f8b258ed_a774f942",
      "revId": "b3b94a91ead04b13f296f41123f6241bf73d257b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c9859d5f_fde5f8cf",
        "filename": "build/BUILDCONFIG.gn",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1144260
      },
      "writtenOn": "2017-11-29T20:08:32Z",
      "side": 1,
      "message": "Alrighty! It sounds like we\u0027re all in agreement. I also agree it would be nice in theory to have available a nice small standalone base library with a GN compiler setup available for lots of platforms. But if it\u0027s not being maintained/used/tested separately it\u0027s not worth trying to maintain a hypothetical build for it.\n\nWith that in mind, I\u0027m going to delete this BUILDCONFIG.gn, as well as the root .gn that refers to it. For now we\u0027ll keep build/BUILD.gn here? I could see an argument that it should move to Crashpad too though.",
      "parentUuid": "030c4ea5_e47a3d57",
      "revId": "b3b94a91ead04b13f296f41123f6241bf73d257b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "36cee9b3_31af7642",
        "filename": "build/BUILDCONFIG.gn",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1174099
      },
      "writtenOn": "2017-11-29T21:11:10Z",
      "side": 1,
      "message": "\u003e Alrighty! It sounds like we\u0027re all in agreement. I also agree it would be nice in theory to have available a nice small standalone base library with a GN compiler setup available for lots of platforms.\n\nHere’s one way we could wind up in that world:\n\n1. Wait ’til you finish moving the world around here and we have something working for our five interesting platforms.\n2. Wait for the someone to mention wanting a cut-back toolchain on gn-dev or whatever the right list is.\n3. Point them to what you’ve done for Crashpad, and casually steer the conversation to “y’know, we could extract our toolchain to make it easier for others to use.”\n4. Do that and let mini_chromium be a consumer too.\n\nRobert tells me that (2) happens all the time, so it wouldn’t even be much waiting.",
      "parentUuid": "c9859d5f_fde5f8cf",
      "revId": "b3b94a91ead04b13f296f41123f6241bf73d257b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "20358fe1_d6e427ad",
        "filename": "build/BUILDCONFIG.gn",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1144624
      },
      "writtenOn": "2017-11-30T20:00:35Z",
      "side": 1,
      "message": "I think if mini_chromium carried tests (and had a waterfall to run them), keeping a BUILDCONFIG would maybe make more sense. Mark\u0027s Steps 1-4 SGTM, and we can always move things around later.\n\nAnd yes this is a topic that does come up on gn-dev a bit. Most recently it was https://groups.google.com/a/chromium.org/forum/#!searchin/gn-dev/toolchain|sort:date/gn-dev/KiJrafKN9Ro/UuowyaYFBgAJ. Someone did extract Chromium\u0027s toolchain to https://github.com/timniederhausen/gn-build, but it\u0027s got all the baggage we\u0027re trying to avoid.",
      "parentUuid": "36cee9b3_31af7642",
      "revId": "b3b94a91ead04b13f296f41123f6241bf73d257b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}